{{- /* Comments area start */ -}}
{{- /* to add comments read => https://gohugo.io/content-management/comments/ */ -}}


<div class="comments">
        <script>
            const getStoredTheme = () => localStorage.getItem("pref-theme") === "dark" ? "dark" : "light";
        
            const setGiscusTheme = () => {
                const sendMessage = (message) => {
                    const iframe = document.querySelector('iframe.giscus-frame');
                    if (iframe) {
                        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
                    }
                }
                sendMessage({ setConfig: { theme: getStoredTheme() } })
            }
        
            document.addEventListener("DOMContentLoaded", () => {
                const giscusAttributes = {
                    "src": "https://giscus.app/client.js",
                    "data-repo": "{{ .Site.Params.giscus.repo }}",
                    "data-repo-id": "{{ .Site.Params.giscus.repoID }}",
                    "data-category": "{{ .Site.Params.giscus.category }}",
                    "data-category-id": "{{ .Site.Params.giscus.categoryID }}",
                    "data-mapping": "{{ .Site.Params.giscus.mapping | default "pathname" }}",
                    "data-strict": "{{ .Site.Params.giscus.strict | default "0" }}",
                    "data-reactions-enabled": "{{ .Site.Params.giscus.reactionsEnabled | default "1" }}",
                    "data-emit-metadata": "{{ .Site.Params.giscus.emitMetadata | default "0" }}",
                    "data-input-position": "{{ .Site.Params.giscus.inputPosition | default "bottom" }}",
                    "data-theme": getStoredTheme(),
                    "data-lang": "{{ .Site.Params.giscus.lang | default "en" }}",
                    "data-loading": "{{ .Site.Params.giscus.loading | default "lazy" }}",
                    "crossorigin": "anonymous",
                    "async": "",
                };
        
                // Dynamically create script tag.
                const giscusScript = document.createElement("script");
                Object.entries(giscusAttributes).forEach(
                    ([key, value]) => giscusScript.setAttribute(key, value));
                console.log(giscusScript)
                document.querySelector(".comments").appendChild(giscusScript);
        
                // Update giscus theme when the theme switcher is clicked.
                const themeSwitcher = document.querySelector("#theme-toggle");
                if (themeSwitcher) {
                    themeSwitcher.addEventListener("click", setGiscusTheme);
                }
            });
        </script>
        </div>
<!--
<script src="https://giscus.app/client.js"
        data-repo="antoniobisconti/commenti_sito"
        data-repo-id="R_kgDOLbGZLA"
        data-category="Q&A"
        data-category-id="DIC_kwDOLbGZLM4CdsDo"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="it"
        crossorigin="anonymous"
        async>
  </script>
-->

{{- /* Comments area end */ -}}